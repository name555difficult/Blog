# 背景

在获取点云的过程中，由于 3D 深度相机扫描视角的限制、三维场景的特征差异以及外部环境的干扰，每一次扫描往往只能获取三维物体的部分表面数据。当需要获取整个三维物体的点云模型时，就需要使用 3D 深度相机从所有角度对物体进行扫描，采集到完整的点云数据后，**在计算机上对三维物体进行拼接**，该过程就是点云配准。

# 定义

从不同角度对三维物体进行扫描时，扫描结果并不会处于同一个坐标系下，因此两幅点云图像会因为六自由度位姿差异产生错位，点云的配准过程就是**计算处两幅点云图像之间的平移、旋转变换矩阵，通过变换将两幅点云修正到统一的坐标系下，使两片点云之间重叠的部分可以完全重合**。

# 数学表述

给定两个点云，配准的任务是求解出点云之间旋转矩阵 R 和平移向量 t 的最优解，即最小化下述公式：

$$
f(R,t) = \sum^{N}_{i=1,Q_i \in Q, P_i \in P} || Q_i - (RP_i+t)||^2
$$
# 流程

点云输入-> 点云降采样、关键点提取 (anchor points) -> 描述子计算（feature descriptor）-> 点云配准

# 点云降采样、关键点提取

点云数据量很大时，会导致配准配准时间开销过大，因此需要从整个点云数据中提取出部分关键点来减少点云配准过程中的**计算量**。

关键点 (anchor point)：点往往处于点云中具有特殊特征的部分，如边缘、曲面顶点、局部密度较大处（单位半径中近邻点较多）等。

**目标：降低计算量的情况下，点云配准的精度不受影响**

常用算法：ISS（Intrinsic Shap Signatures）、Harris3D、SIFT3D（Scale Invariant Feature Transform）等。

算法结果：提取点云中关键点，完成降采样，但是源点云与目标点云中关键点的对应关系依旧无法确认。

# 点云特征描述子计算

定义：对所有关键点构建**局部坐标系**，依据每个关键点的局部几何空间信息，计算出相应的局部特征描述子来**表述该局部独有的特征**，最后对比源点云与目标点云中的所有关键点的局部特征描述（类似于相似度度量），确定匹配点对。

**局部特征描述子通常都具有转换不变性、局部密度变化不变性、以及噪声不变性等特性**。特征描述在经过点云旋转、平移、采样密度变化以及周围噪声的影响时，始终具有相似性，从而满足在两幅点云中计算出的对应点局部特征描述相互匹配。

常用描述子：PFH（Point Feature Histogram）描述子算法、FPFH（Fast Point FeatureHistogram）描述子算法、SHOT（Signature of Histogram of OrienTations）描述子算法。

在点云配准的过程中，局部特征描述子算法的选择，将直接影响源点云与目标点云之间对应点匹配的正确率，因此需要使用高效且不易受到数据采集角度等外界因素干扰的描述子算法。

## 1. PFH（Point Feature Histogram）描述子算法

依据关键点及其邻近点之间的几何关系来计算 Histogram。



# 点云配准算法

定义：**根据局部特征描述子查找匹配点，实现源点云向目标点云的配准。**

常用算法：基于 RANSAC 的粗配准算法

**三个点是可以形成刚体变换矩阵的最少点数**。